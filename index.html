<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>é‚€è¯·å‡½</title>
  <style>
    html, body { margin:0; height:100%; background:#000; }
    .wrap{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:#000; }
    .poster{ width:100%; height:100%; object-fit:contain; display:block; background:#000; }
    .tip{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      padding:10px 14px; border-radius:999px;
      background:rgba(255,255,255,.88);
      font:14px/1.2 system-ui, -apple-system, "PingFang SC", "Microsoft YaHei";
      color:#111; z-index:10;
      user-select:none;
    }
    .corner{
      position:fixed; right:12px; top:12px;
      padding:8px 10px; border-radius:999px;
      background:rgba(255,255,255,.85);
      font:14px/1.2 system-ui, -apple-system, "PingFang SC", "Microsoft YaHei";
      color:#111; z-index:10;
      user-select:none;
    }
  </style>
</head>
<body>
  <div class="wrap" id="wrap">
    <img class="poster" src="./birthday.png" alt="é‚€è¯·å‡½æµ·æŠ¥" />
    <div class="corner" id="btn">ğŸ”Š æ’­æ”¾éŸ³ä¹</div>
    <div class="tip" id="tip">æç¤ºï¼šç‚¹å‡»ä»»æ„ä½ç½®å¼€å¯éŸ³ä¹</div>
  </div>

  <audio id="bgm" src="./bgm.mp3" preload="auto" loop playsinline webkit-playsinline></audio>

  <script>
    const audio = document.getElementById("bgm");
    const wrap = document.getElementById("wrap");
    const tip = document.getElementById("tip");
    const btn = document.getElementById("btn");

    function hideTips() {
      tip.style.display = "none";
      btn.textContent = "ğŸµ æ­£åœ¨æ’­æ”¾";
    }

    async function tryPlay() {
      try {
        await audio.play();
        hideTips();
      } catch (e) {
        // å¾®ä¿¡/æµè§ˆå™¨ç­–ç•¥å¯èƒ½é˜»æ­¢è‡ªåŠ¨æ’­æ”¾ï¼Œç­‰å¾…ç”¨æˆ·æ‰‹åŠ¿
      }
    }

    // å¾®ä¿¡å†…ï¼šæ¡¥æ¥ ready åå°è¯•æ’­æ”¾
    function wechatBridgePlay(){ tryPlay(); }
    if (typeof WeixinJSBridge === "object" && typeof WeixinJSBridge.invoke === "function") {
      wechatBridgePlay();
    } else {
      document.addEventListener("WeixinJSBridgeReady", wechatBridgePlay, false);
    }

    // å…œåº•ï¼šé¦–æ¬¡è§¦æ‘¸/ç‚¹å‡»é¡µé¢æ’­æ”¾
    function onFirstGesture() {
      tryPlay();
      wrap.removeEventListener("touchstart", onFirstGesture);
      wrap.removeEventListener("click", onFirstGesture);
    }
    wrap.addEventListener("touchstart", onFirstGesture, { passive: true });
    wrap.addEventListener("click", onFirstGesture);
    btn.addEventListener("click", onFirstGesture);
  </script>
</body>
</html>
